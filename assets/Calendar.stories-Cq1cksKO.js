import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as E}from"./iframe-BAutRjJ-.js";import{B as h}from"./Button-LuKBj8-e.js";import"./preload-helper-PPVm8Dsz.js";function A(e){return e<10?`0${e}`:`${e}`}function N(e){return`${e.getFullYear()}-${A(e.getMonth()+1)}-${A(e.getDate())}`}function T(e,s){const u=new Date(e,s,1),a=new Date(e,s+1,0),r=[],d=new Date(u);d.setDate(u.getDate()-d.getDay());const i=new Date(a);i.setDate(a.getDate()+(6-i.getDay()));for(let o=new Date(d);o<=i;o.setDate(o.getDate()+1))r.push(new Date(o));const l=[];for(let o=0;o<r.length;o+=7)l.push(r.slice(o,o+7));return l}function R(e){if(typeof e!="object"||e===null)return null;const s=e;return Array.isArray(s.items)?s.items:Array.isArray(s.events)?s.events:null}function C(e){if(e!=null){if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e=="object"){const s=e;if(typeof s.title=="string")return s.title;if(typeof s.name=="string")return s.name}}}function I(e){const s=[];if(!Array.isArray(e)||e.length===0)return s;function u(a,r,d){for(const[i,l]of r.entries()){const o=a?.id?`${a.id}-${i}`:`evt-${d}-${i}`;s.push({id:a?.id,title:C(l)??`item-${i}`,key:o})}}for(const[a,r]of e.entries()){if(r==null)continue;const d=R(r);if(d?.length){u(r??void 0,d,a);continue}if(typeof r=="object"){const l=r,o=l.id??`evt-${a}`,k=l.title??l.name??C(l)??o;s.push({id:o,title:k,key:o});continue}const i=`evt-${a}`;s.push({id:i,title:C(r)??i,key:i})}return s}const O=({dayEvents:e,onEventClick:s})=>{const u=I(e??[]);return u.length===0?null:t.jsx("div",{className:"space-y-1",children:u.map(a=>t.jsx(h,{onClick:()=>a.id&&s?.(a.id),title:a.title,"aria-label":a.title,color_name:"light",className:"text-left text-xs",children:t.jsx("div",{className:"truncate",children:a.title})},a.key))})},S=({d:e,isCurrentMonth:s,dayEvents:u,actionLabel:a,onAction:r,onEventClick:d,containerClass:i})=>{const l=N(e),o=i??"min-h-[6rem]";return t.jsxs("div",{className:`${o} border rounded-lg p-3 ${s?"bg-surface-panel dark:bg-surface-panel-dark":"bg-surface-base dark:bg-surface-base-dark"} border-border dark:border-border-dark`,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx("div",{className:`text-sm font-medium ${s?"text-text-primary dark:text-text-primary-dark":"text-text-secondary dark:text-text-secondary-dark"}`,children:e.getDate()}),t.jsx(h,{type:"button",onClick:()=>r?.(e),color_name:"primary",className:"text-xs w-auto!",children:a})]}),t.jsx("div",{className:"mt-2 space-y-1",children:t.jsx(O,{dayEvents:u,onEventClick:d})})]},l)};function y({year:e,month:s,title:u,onPrev:a,onNext:r,onAction:d,onEventClick:i,eventsByDate:l={},actionLabel:o="Plan",initialView:k}){const[c,D]=E.useState(new Date(e,s,1)),[p,M]=E.useState(k??"month"),Y=T(c.getFullYear(),c.getMonth()),w=new Date(c);w.setDate(c.getDate()-c.getDay());const $=[];for(let n=0;n<7;n++){const g=new Date(w);g.setDate(w.getDate()+n),$.push(g)}const W=()=>{if(p==="month"){const n=new Date(c.getFullYear(),c.getMonth()-1,1);D(n)}else{const n=new Date(c);n.setDate(n.getDate()-7),D(n)}a?.()},L=()=>{if(p==="month"){const n=new Date(c.getFullYear(),c.getMonth()+1,1);D(n)}else{const n=new Date(c);n.setDate(n.getDate()+7),D(n)}r?.()};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{children:t.jsx("h2",{className:"text-lg font-semibold",children:u??`${c.toLocaleString(void 0,{month:"long",year:"numeric"})}`})}),t.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[t.jsx(h,{onClick:()=>M("month"),variant:p==="month"?"default":"border",color_name:"light",className:"text-primary",children:"Month"}),t.jsx(h,{onClick:()=>M("week"),variant:p==="week"?"default":"border",color_name:"light",className:"text-primary",children:"Week"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(h,{onClick:W,color_name:"light",children:"Prev"}),t.jsx(h,{onClick:L,color_name:"light",children:"Next"})]})]}),t.jsx("div",{className:"hidden sm:grid sm:grid-cols-7 gap-2 text-left",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(n=>t.jsx("div",{className:"font-semibold py-2 text-sm text-text-secondary dark:text-text-secondary-dark",children:n},n))}),p==="month"?t.jsx("div",{className:"grid sm:grid-cols-7 grid-cols-2 gap-3 mt-3",children:Y.flat().map(n=>{const g=N(n),j=n.getMonth()===c.getMonth(),b=l[g]??[];return t.jsx(S,{d:n,isCurrentMonth:j,dayEvents:b,actionLabel:o,onAction:d,onEventClick:i,containerClass:"min-h-[6rem]"},g)})}):t.jsx("div",{className:"grid sm:grid-cols-7 grid-cols-1 gap-3 mt-3",children:$.map(n=>{const g=N(n),j=n.getMonth()===c.getMonth(),b=l[g]??[];return t.jsx(S,{d:n,isCurrentMonth:j,dayEvents:b,actionLabel:o,onAction:d,onEventClick:i,containerClass:"min-h-[8rem]"},g)})})]})}y.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{eventsByDate:{defaultValue:{value:"{}",computed:!1},required:!1},actionLabel:{defaultValue:{value:"'Plan'",computed:!1},required:!1}}};const J={title:"Data Display/Calendar",component:y,parameters:{layout:"centered"}},m=new Date,f=e=>e.toISOString().slice(0,10),P=new Date(m);P.setDate(m.getDate()+1);const _=new Date(m);_.setDate(m.getDate()+3);const F=new Date(m);F.setDate(m.getDate()-2);const V=new Date(m);V.setDate(m.getDate()+7);const B={[f(m)]:[{id:"evt-today-1",title:"Team Meeting"},{id:"evt-today-2",title:"1:1",items:[{title:"Discuss roadmap"}]}],[f(P)]:[{id:"evt-tomorrow-1",title:"Deploy"}],[f(_)]:[{id:"evt-deadline",title:"Project Deadline"},{id:"evt-workshop",title:"Workshop",items:[{title:"Prep"},{title:"Run"}]}],[f(F)]:[{id:"evt-past",title:"Client Call"}],[f(V)]:[{id:"evt-events-1",events:[{name:"Recipe A"},{name:"Recipe B"}]}]},v={render:()=>t.jsx(y,{year:m.getFullYear(),month:m.getMonth(),eventsByDate:B,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})},x={render:()=>t.jsx(y,{year:m.getFullYear(),month:m.getMonth(),initialView:"week",eventsByDate:B,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...v.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} initialView="week" eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...x.parameters?.docs?.source}}};const K=["MonthView","WeekView"];export{v as MonthView,x as WeekView,K as __namedExportsOrder,J as default};
