import{j as v}from"./jsx-runtime-u17CrQMm.js";import{r,R as x}from"./iframe-CckUPoY_.js";import{g as Ke}from"./index-CjEH1ENk.js";import{o as L,Y as K,K as Z,W as ke,a9 as Ze,T as We,k as ve,u as H,x as Ce,a as Ge,p as Ye,c as se,b as g,f as ee,d as Je,G as Xe,e as et,aa as tt,E as nt,S as R,J as Oe,M as ot,N as at,C as ie,O as st,P as rt,Q as it,R as lt,I as ut,y as Y,U as ct,m as Q,V as Te,X as dt,Z as pt,_ as ft,r as mt,ab as vt,n as he,t as bt,ac as ht,z as xt,v as gt,A as yt,B as Ot,a4 as Se,a0 as S,a1 as St,a2 as we,a5 as wt,a6 as $t,a7 as Et,ad as It,F as Rt,g as kt,L as Ct,h as te,i as Tt,s as Pt,ae as Mt,af as Lt,$ as Nt,j as Bt,w as Ft,q as jt,a8 as Dt}from"./use-text-value-B4e8sH7m.js";import{r as G}from"./index-sxyKX9aA.js";import{B as _t}from"./Button-ouZSvFTA.js";import{M as At}from"./Modal-BFv-qeC7.js";import"./preload-helper-PPVm8Dsz.js";import"./index-D40Et5wv.js";function Vt({title:e,titleId:n,...t},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},t),e?r.createElement("title",{id:n},e):null,r.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const Ut=r.forwardRef(Vt);function zt({title:e,titleId:n,...t},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},t),e?r.createElement("title",{id:n},e):null,r.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}const qt=r.forwardRef(zt);function Ht(e,n,t){let[o,a]=r.useState(t),s=e!==void 0,u=r.useRef(s),c=r.useRef(!1),f=r.useRef(!1);return s&&!u.current&&!c.current?(c.current=!0,u.current=s,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!s&&u.current&&!f.current&&(f.current=!0,u.current=s,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[s?e:o,L(l=>(s||G.flushSync(()=>a(l)),n?.(l)))]}function Qt(e){let[n]=r.useState(e);return n}function Pe(e={},n=null,t=[]){for(let[o,a]of Object.entries(e))Le(t,Me(n,o),a);return t}function Me(e,n){return e?e+"["+n+"]":n}function Le(e,n,t){if(Array.isArray(t))for(let[o,a]of t.entries())Le(e,Me(n,o.toString()),a);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):Zt(t)&&!r.isValidElement(t)&&Pe(t,n,e)}function Kt(e){var n,t;let o=(n=e?.form)!=null?n:e.closest("form");if(o){for(let a of o.elements)if(a!==e&&(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image")){a.click();return}(t=o.requestSubmit)==null||t.call(o)}}function Zt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let n=Object.getPrototypeOf(e);return n===null||Object.getPrototypeOf(n)===null}let Wt="span";var xe=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(xe||{});function Gt(e,n){var t;let{features:o=1,...a}=e,s={ref:n,"aria-hidden":(o&2)===2?!0:(t=a["aria-hidden"])!=null?t:void 0,hidden:(o&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(o&4)===4&&(o&2)!==2&&{display:"none"}}};return Z()({ourProps:s,theirProps:a,slot:{},defaultTag:Wt,name:"Hidden"})}let Ne=K(Gt),Yt=r.createContext(null);function Jt({children:e}){let n=r.useContext(Yt);if(!n)return x.createElement(x.Fragment,null,e);let{target:t}=n;return t?G.createPortal(x.createElement(x.Fragment,null,e),t):null}function Xt({data:e,form:n,disabled:t,onReset:o,overrides:a}){let[s,u]=r.useState(null),c=ke();return r.useEffect(()=>{if(o&&s)return c.addEventListener(s,"reset",o)},[s,n,o]),x.createElement(Jt,null,x.createElement(en,{setForm:u,formId:n}),Pe(e).map(([f,l])=>x.createElement(Ne,{features:xe.Hidden,...Ze({key:f,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:n,disabled:t,name:f,value:l,...a})})))}function en({setForm:e,formId:n}){return r.useEffect(()=>{if(n){let t=document.getElementById(n);t&&e(t)}},[e,n]),n?null:x.createElement(Ne,{features:xe.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:t=>{if(!t)return;let o=t.closest("form");o&&e(o)}})}function tn(e,n){return e!==null&&n!==null&&typeof e=="object"&&typeof n=="object"&&"id"in e&&"id"in n?e.id===n.id:e===n}function nn(e=tn){return r.useCallback((n,t)=>{if(typeof e=="string"){let o=e;return n?.[o]===t?.[o]}return e(n,t)},[e])}function on({children:e,freeze:n},t){let o=Be(n,e);return r.isValidElement(o)?r.cloneElement(o,{ref:t}):x.createElement(x.Fragment,null,o)}x.forwardRef(on);function Be(e,n){let[t,o]=r.useState(n);return!e&&t!==n&&o(n),e?t:n}var an=Object.defineProperty,sn=(e,n,t)=>n in e?an(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,$e=(e,n,t)=>(sn(e,typeof n!="symbol"?n+"":n,t),t),w=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(w||{}),V=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(V||{}),re=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(re||{}),Fe=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.SelectOption=5]="SelectOption",e[e.RegisterOptions=6]="RegisterOptions",e[e.UnregisterOptions=7]="UnregisterOptions",e[e.SetButtonElement=8]="SetButtonElement",e[e.SetOptionsElement=9]="SetOptionsElement",e[e.SortOptions=10]="SortOptions",e[e.MarkButtonAsMoved=11]="MarkButtonAsMoved",e))(Fe||{});function Ee(e,n=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=Xe(n(e.options.slice()),s=>s.dataRef.current.domRef.current),a=t?o.indexOf(t):null;return a===-1&&(a=null),{options:o,activeOptionIndex:a}}let rn={1(e){if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=e.buttonElement?se.Tracked(Je(e.buttonElement)):e.buttonPositionState;return{...e,activeOptionIndex:null,pendingFocus:{focus:g.Nothing},listboxState:1,__demoMode:!1,buttonPositionState:n}},0(e,n){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,a=e.options.findIndex(s=>o(s.dataRef.current.value));return a!==-1&&(t=a),{...e,frozenValue:!1,pendingFocus:n.focus,listboxState:0,activeOptionIndex:t,__demoMode:!1,buttonPositionState:se.Idle}},2(e,n){var t,o,a,s,u;if(e.dataRef.current.disabled||e.listboxState===1)return e;let c={...e,searchQuery:"",activationTrigger:(t=n.trigger)!=null?t:1,__demoMode:!1};if(n.focus===g.Nothing)return{...c,activeOptionIndex:null};if(n.focus===g.Specific)return{...c,activeOptionIndex:e.options.findIndex(b=>b.id===n.id)};if(n.focus===g.Previous){let b=e.activeOptionIndex;if(b!==null){let O=e.options[b].dataRef.current.domRef,p=ee(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(p!==null){let i=e.options[p].dataRef.current.domRef;if(((o=O.current)==null?void 0:o.previousElementSibling)===i.current||((a=i.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeOptionIndex:p}}}}else if(n.focus===g.Next){let b=e.activeOptionIndex;if(b!==null){let O=e.options[b].dataRef.current.domRef,p=ee(n,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(p!==null){let i=e.options[p].dataRef.current.domRef;if(((s=O.current)==null?void 0:s.nextElementSibling)===i.current||((u=i.current)==null?void 0:u.nextElementSibling)===null)return{...c,activeOptionIndex:p}}}}let f=Ee(e),l=ee(n,{resolveItems:()=>f.options,resolveActiveIndex:()=>f.activeOptionIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.current.disabled});return{...c,...f,activeOptionIndex:l}},3:(e,n)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,o=e.searchQuery+n.value.toLowerCase(),a=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(u=>{var c;return!u.dataRef.current.disabled&&((c=u.dataRef.current.textValue)==null?void 0:c.startsWith(o))}),s=a?e.options.indexOf(a):-1;return s===-1||s===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:s,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5(e){return e.dataRef.current.mode===0?{...e,frozenValue:!0}:{...e}},6:(e,n)=>{let t=e.options.concat(n.options),o=e.activeOptionIndex;if(e.pendingFocus.focus!==g.Nothing&&(o=ee(e.pendingFocus,{resolveItems:()=>t,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled})),e.activeOptionIndex===null){let{isSelected:a}=e.dataRef.current;if(a){let s=t.findIndex(u=>a?.(u.dataRef.current.value));s!==-1&&(o=s)}}return{...e,options:t,activeOptionIndex:o,pendingFocus:{focus:g.Nothing},pendingShouldSort:!0}},7:(e,n)=>{let t=e.options,o=[],a=new Set(n.options);for(let[s,u]of t.entries())if(a.has(u.id)&&(o.push(s),a.delete(u.id),a.size===0))break;if(o.length>0){t=t.slice();for(let s of o.reverse())t.splice(s,1)}return{...e,options:t,activationTrigger:1}},8:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},9:(e,n)=>e.optionsElement===n.element?e:{...e,optionsElement:n.element},10:e=>e.pendingShouldSort?{...e,...Ee(e),pendingShouldSort:!1}:e,11(e){return e.buttonPositionState.kind!=="Tracked"?e:{...e,buttonPositionState:se.Moved}}};class ge extends We{constructor(n){super(n),$e(this,"actions",{onChange:t=>{let{onChange:o,compare:a,mode:s,value:u}=this.state.dataRef.current;return H(s,{0:()=>o?.(t),1:()=>{let c=u.slice(),f=c.findIndex(l=>a(l,t));return f===-1?c.push(t):c.splice(f,1),o?.(c)}})},registerOption:ve(()=>{let t=[],o=new Set;return[(a,s)=>{o.has(s)||(o.add(s),t.push({id:a,dataRef:s}))},()=>(o.clear(),this.send({type:6,options:t.splice(0)}))]}),unregisterOption:ve(()=>{let t=[];return[o=>t.push(o),()=>{this.send({type:7,options:t.splice(0)})}]}),goToOption:ve(()=>{let t=null;return[(o,a)=>{t={type:2,...o,trigger:a}},()=>t&&this.send(t)]}),closeListbox:()=>{this.send({type:1})},openListbox:t=>{this.send({type:0,focus:t})},selectActiveOption:()=>{var t;if(this.state.activeOptionIndex!==null){let{dataRef:o}=this.state.options[this.state.activeOptionIndex];this.actions.selectOption(o.current.value)}else this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(t=this.state.buttonElement)==null||t.focus({preventScroll:!0}))},selectOption:t=>{this.send({type:5,value:t})},search:t=>{this.send({type:3,value:t})},clearSearch:()=>{this.send({type:4})},setButtonElement:t=>{this.send({type:8,element:t})},setOptionsElement:t=>{this.send({type:9,element:t})}}),$e(this,"selectors",{activeDescendantId(t){var o;let a=t.activeOptionIndex,s=t.options;return a===null||(o=s[a])==null?void 0:o.id},isActive(t,o){var a;let s=t.activeOptionIndex,u=t.options;return s!==null?((a=u[s])==null?void 0:a.id)===o:!1},hasFrozenValue(t){return t.frozenValue},shouldScrollIntoView(t,o){return t.__demoMode||t.listboxState!==0||t.activationTrigger===0?!1:this.isActive(t,o)},didButtonMove(t){return t.buttonPositionState.kind==="Moved"}}),this.on(6,()=>{requestAnimationFrame(()=>{this.send({type:10})})});{let t=this.state.id,o=Ce.get(null);this.disposables.add(o.on(Ge.Push,a=>{!o.selectors.isTop(a,t)&&this.state.listboxState===0&&this.actions.closeListbox()})),this.on(0,()=>o.actions.push(t)),this.on(1,()=>o.actions.pop(t))}this.disposables.group(t=>{this.on(1,o=>{o.buttonElement&&(t.dispose(),t.add(Ye(o.buttonElement,o.buttonPositionState,()=>{this.send({type:11})})))})}),this.on(5,(t,o)=>{var a;this.actions.onChange(o.value),this.state.dataRef.current.mode===0&&(this.actions.closeListbox(),(a=this.state.buttonElement)==null||a.focus({preventScroll:!0}))})}static new({id:n,__demoMode:t=!1}){return new ge({id:n,dataRef:{current:{}},listboxState:t?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,buttonElement:null,optionsElement:null,pendingShouldSort:!1,pendingFocus:{focus:g.Nothing},frozenValue:!1,__demoMode:t,buttonPositionState:se.Idle})}reduce(n,t){return H(t.type,rn,n,t)}}const je=r.createContext(null);function ye(e){let n=r.useContext(je);if(n===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,De),t}return n}function De({id:e,__demoMode:n=!1}){let t=r.useMemo(()=>ge.new({id:e,__demoMode:n}),[]);return et(()=>t.dispose()),t}let le=r.createContext(null);le.displayName="ListboxDataContext";function J(e){let n=r.useContext(le);if(n===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,J),t}return n}let ln=r.Fragment;function un(e,n){let t=r.useId(),o=ht(),{value:a,defaultValue:s,form:u,name:c,onChange:f,by:l,invalid:b=!1,disabled:O=o||!1,horizontal:p=!1,multiple:i=!1,__demoMode:y=!1,...T}=e;const k=p?"horizontal":"vertical";let D=Y(n),M=Qt(s),[$=i?[]:void 0,C]=Ht(a,f,M),E=De({id:t,__demoMode:y}),_=r.useRef({static:!1,hold:!1}),U=r.useRef(new Map),N=nn(l),z=r.useCallback(I=>H(m.mode,{[V.Multi]:()=>$.some(W=>N(W,I)),[V.Single]:()=>N($,I)}),[$]),m=Q({value:$,disabled:O,invalid:b,mode:i?V.Multi:V.Single,orientation:k,onChange:C,compare:N,isSelected:z,optionsPropsRef:_,listRef:U});he(()=>{E.state.dataRef.current=m},[m]);let P=R(E,I=>I.listboxState),B=Ce.get(null),q=R(B,r.useCallback(I=>B.selectors.isTop(I,t),[B,t])),[F,h]=R(E,I=>[I.buttonElement,I.optionsElement]);xt(q,[F,h],(I,W)=>{E.send({type:Fe.CloseListbox}),wt(W,$t.Loose)||(I.preventDefault(),F?.focus())});let j=Q({open:P===w.Open,disabled:O,invalid:b,value:$}),[ce,de]=gt({inherit:!0}),X={ref:D},pe=r.useCallback(()=>{if(M!==void 0)return C?.(M)},[C,M]),fe=Z();return x.createElement(de,{value:ce,props:{htmlFor:F?.id},slot:{open:P===w.Open,disabled:O}},x.createElement(yt,null,x.createElement(je.Provider,{value:E},x.createElement(le.Provider,{value:m},x.createElement(Ot,{value:H(P,{[w.Open]:ie.Open,[w.Closed]:ie.Closed})},c!=null&&$!=null&&x.createElement(Xt,{disabled:O,data:{[c]:$},form:u,onReset:pe}),fe({ourProps:X,theirProps:T,slot:j,defaultTag:ln,name:"Listbox"}))))))}let cn="button";function dn(e,n){let t=r.useId(),o=It(),a=J("Listbox.Button"),s=ye("Listbox.Button"),{id:u=o||`headlessui-listbox-button-${t}`,disabled:c=a.disabled||!1,autoFocus:f=!1,...l}=e,b=Y(n,Rt(),s.actions.setButtonElement),O=kt(),[p,i,y]=R(s,h=>[h.listboxState,h.buttonElement,h.optionsElement]),T=p===w.Open;Ct(T,{trigger:i,action:r.useCallback(h=>{if(i!=null&&i.contains(h.target))return te.Ignore;let j=h.target.closest('[role="option"]:not([data-disabled])');return Tt(j)?te.Select(j):y!=null&&y.contains(h.target)?te.Ignore:te.Close},[i,y]),close:s.actions.closeListbox,select:s.actions.selectActiveOption});let k=L(h=>{switch(h.key){case S.Enter:Kt(h.currentTarget);break;case S.Space:case S.ArrowDown:h.preventDefault(),s.actions.openListbox({focus:a.value?g.Nothing:g.First});break;case S.ArrowUp:h.preventDefault(),s.actions.openListbox({focus:a.value?g.Nothing:g.Last});break}}),D=L(h=>{switch(h.key){case S.Space:h.preventDefault();break}}),M=Pt(h=>{var j;s.state.listboxState===w.Open?(G.flushSync(()=>s.actions.closeListbox()),(j=s.state.buttonElement)==null||j.focus({preventScroll:!0})):(h.preventDefault(),s.actions.openListbox({focus:g.Nothing}))}),$=L(h=>h.preventDefault()),C=Mt([u]),E=Lt(),{isFocusVisible:_,focusProps:U}=Nt({autoFocus:f}),{isHovered:N,hoverProps:z}=Bt({isDisabled:c}),{pressed:m,pressProps:P}=Ft({disabled:c}),B=Q({open:p===w.Open,active:m||p===w.Open,disabled:c,invalid:a.invalid,value:a.value,hover:N,focus:_,autofocus:f}),q=R(s,h=>h.listboxState===w.Open),F=Te(O(),{ref:b,id:u,type:jt(e,i),"aria-haspopup":"listbox","aria-controls":y?.id,"aria-expanded":q,"aria-labelledby":C,"aria-describedby":E,disabled:c||void 0,autoFocus:f,onKeyDown:k,onKeyUp:D,onKeyPress:$},M,U,z,P);return Z()({ourProps:F,theirProps:l,slot:B,defaultTag:cn,name:"Listbox.Button"})}let _e=r.createContext(!1),pn="div",fn=Se.RenderStrategy|Se.Static;function mn(e,n){let t=r.useId(),{id:o=`headlessui-listbox-options-${t}`,anchor:a,portal:s=!1,modal:u=!0,transition:c=!1,...f}=e,l=nt(a),[b,O]=r.useState(null);l&&(s=!0);let p=J("Listbox.Options"),i=ye("Listbox.Options"),[y,T,k,D]=R(i,d=>[d.listboxState,d.buttonElement,d.optionsElement,d.__demoMode]),M=Oe(T),$=Oe(k),C=ot(),[E,_]=at(c,b,C!==null?(C&ie.Open)===ie.Open:y===w.Open);st(E,T,i.actions.closeListbox);let U=D?!1:u&&y===w.Open;rt(U,$);let N=D?!1:u&&y===w.Open;it(N,{allowed:r.useCallback(()=>[T,k],[T,k])});let z=R(i,i.selectors.didButtonMove)?!1:E,m=R(i,i.selectors.hasFrozenValue)&&!e.static,P=Be(m,p.value),B=r.useCallback(d=>p.compare(P,d),[p.compare,P]),q=R(i,d=>{var A;if(l==null||!((A=l?.to)!=null&&A.includes("selection")))return null;let me=d.options.findIndex(Qe=>B(Qe.dataRef.current.value));return me===-1&&(me=0),me}),F=(()=>{if(l==null)return;if(q===null)return{...l,inner:void 0};let d=Array.from(p.listRef.current.values());return{...l,inner:{listRef:{current:d},index:q}}})(),[h,j]=lt(F),ce=ut(),de=Y(n,l?h:null,i.actions.setOptionsElement,O),X=ke();r.useEffect(()=>{let d=k;d&&y===w.Open&&(ct(d)||d==null||d.focus({preventScroll:!0}))},[y,k]);let pe=L(d=>{var A;switch(X.dispose(),d.key){case S.Space:if(i.state.searchQuery!=="")return d.preventDefault(),d.stopPropagation(),i.actions.search(d.key);case S.Enter:d.preventDefault(),d.stopPropagation(),i.actions.selectActiveOption();break;case H(p.orientation,{vertical:S.ArrowDown,horizontal:S.ArrowRight}):return d.preventDefault(),d.stopPropagation(),i.actions.goToOption({focus:g.Next});case H(p.orientation,{vertical:S.ArrowUp,horizontal:S.ArrowLeft}):return d.preventDefault(),d.stopPropagation(),i.actions.goToOption({focus:g.Previous});case S.Home:case S.PageUp:return d.preventDefault(),d.stopPropagation(),i.actions.goToOption({focus:g.First});case S.End:case S.PageDown:return d.preventDefault(),d.stopPropagation(),i.actions.goToOption({focus:g.Last});case S.Escape:d.preventDefault(),d.stopPropagation(),G.flushSync(()=>i.actions.closeListbox()),(A=i.state.buttonElement)==null||A.focus({preventScroll:!0});return;case S.Tab:d.preventDefault(),d.stopPropagation(),G.flushSync(()=>i.actions.closeListbox()),St(i.state.buttonElement,d.shiftKey?we.Previous:we.Next);break;default:d.key.length===1&&(i.actions.search(d.key),X.setTimeout(()=>i.actions.clearSearch(),350));break}}),fe=R(i,d=>{var A;return(A=d.buttonElement)==null?void 0:A.id}),I=Q({open:y===w.Open}),W=Te(l?ce():{},{id:o,ref:de,"aria-activedescendant":R(i,i.selectors.activeDescendantId),"aria-multiselectable":p.mode===V.Multi?!0:void 0,"aria-labelledby":fe,"aria-orientation":p.orientation,onKeyDown:pe,role:"listbox",tabIndex:y===w.Open?0:void 0,style:{...f.style,...j,"--button-width":pt(E,T,!0).width},...dt(_)}),qe=Z(),He=r.useMemo(()=>p.mode===V.Multi?p:{...p,isSelected:B},[p,B]);return x.createElement(ft,{enabled:s?e.static||E:!1,ownerDocument:M},x.createElement(le.Provider,{value:He},qe({ourProps:W,theirProps:f,slot:I,defaultTag:pn,features:fn,visible:z,name:"Listbox.Options"})))}let vn="div";function bn(e,n){let t=r.useId(),{id:o=`headlessui-listbox-option-${t}`,disabled:a=!1,value:s,...u}=e,c=r.useContext(_e)===!0,f=J("Listbox.Option"),l=ye("Listbox.Option"),b=R(l,m=>l.selectors.isActive(m,o)),O=f.isSelected(s),p=r.useRef(null),i=mt(p),y=vt({disabled:a,value:s,domRef:p,get textValue(){return i()}}),T=Y(n,p,m=>{m?f.listRef.current.set(o,m):f.listRef.current.delete(o)}),k=R(l,m=>l.selectors.shouldScrollIntoView(m,o));he(()=>{if(k)return Et().requestAnimationFrame(()=>{var m,P;(P=(m=p.current)==null?void 0:m.scrollIntoView)==null||P.call(m,{block:"nearest"})})},[k,p]),he(()=>{if(!c)return l.actions.registerOption(o,y),()=>l.actions.unregisterOption(o)},[y,o,c]);let D=L(m=>{if(a)return m.preventDefault();l.actions.selectOption(s)}),M=L(()=>{if(a)return l.actions.goToOption({focus:g.Nothing});l.actions.goToOption({focus:g.Specific,id:o})}),$=bt(),C=L(m=>$.update(m)),E=L(m=>{$.wasMoved(m)&&(a||b&&l.state.activationTrigger===re.Pointer||l.actions.goToOption({focus:g.Specific,id:o},re.Pointer))}),_=L(m=>{$.wasMoved(m)&&(a||b&&l.state.activationTrigger===re.Pointer&&l.actions.goToOption({focus:g.Nothing}))}),U=Q({active:b,focus:b,selected:O,disabled:a,selectedOption:O&&c}),N=c?{}:{id:o,ref:T,role:"option",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-selected":O,disabled:void 0,onClick:D,onFocus:M,onPointerEnter:C,onMouseEnter:C,onPointerMove:E,onMouseMove:E,onPointerLeave:_,onMouseLeave:_},z=Z();return!O&&c?null:z({ourProps:N,theirProps:u,slot:U,defaultTag:vn,name:"Listbox.Option"})}let hn=r.Fragment;function xn(e,n){let{options:t,placeholder:o,...a}=e,s={ref:Y(n)},u=J("ListboxSelectedOption"),c=Q({}),f=u.value===void 0||u.value===null||u.mode===V.Multi&&Array.isArray(u.value)&&u.value.length===0,l=Z();return x.createElement(_e.Provider,{value:!0},l({ourProps:s,theirProps:{...a,children:x.createElement(x.Fragment,null,o&&f?o:t)},slot:c,defaultTag:hn,name:"ListboxSelectedOption"}))}let gn=K(un),Ae=K(dn),yn=tt,Ve=K(mn),Ue=K(bn),On=K(xn),Sn=Object.assign(gn,{Button:Ae,Label:yn,Options:Ve,Option:Ue,SelectedOption:On});function ue({label:e,options:n,value:t,onChange:o,placeholder:a,className:s="",disabled:u=!1}){const c=r.useMemo(()=>Ke(),[]),f=r.useMemo(()=>n.find(l=>l.value===t),[n,t]);return v.jsxs("div",{className:`flex flex-col gap-1.5 ${s}`,children:[e&&v.jsx("label",{htmlFor:c,className:"text-sm font-bold text-text-primary dark:text-text-primary-dark",children:e}),v.jsx(Sn,{value:t,onChange:o,disabled:u,children:v.jsxs("div",{className:"relative",children:[v.jsxs(Ae,{id:c,className:`
              relative w-full cursor-pointer rounded-lg border border-border dark:border-border-dark 
              bg-surface-panel dark:bg-surface-panel-dark py-2 pl-3 pr-10 text-left text-sm
              focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
              disabled:opacity-50 disabled:cursor-not-allowed transition-all
            `,children:[v.jsx("span",{className:`block truncate ${f?"text-text-primary dark:text-text-primary-dark":"text-text-secondary/50"}`,children:f?f.label:a}),v.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:v.jsx(qt,{className:"h-5 w-5 text-text-secondary","aria-hidden":"true"})})]}),v.jsx(Dt,{as:r.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:v.jsx(Ve,{anchor:"bottom start",className:`
                z-9999 mt-1 max-h-60 w-(--button-width) overflow-auto rounded-md 
                bg-surface-panel dark:bg-surface-panel-dark py-1 shadow-xl ring-1 ring-black/5 
                focus:outline-none border border-border dark:border-border-dark
                [--anchor-gap:4px]
              `,children:n.map(l=>v.jsx(Ue,{value:l.value,className:"group relative cursor-pointer select-none py-2 pl-10 pr-4 text-sm data-focus:bg-primary data-focus:text-text-on-primary text-text-primary dark:text-text-primary-dark",children:({selected:b})=>v.jsxs(v.Fragment,{children:[v.jsx("span",{className:`block truncate ${b?"font-bold":"font-normal"}`,children:l.label}),b?v.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-primary group-data-focus:text-text-on-primary",children:v.jsx(Ut,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},l.value))})})]})})]})}ue.__docgenInfo={description:"",methods:[],displayName:"Select",props:{label:{required:!1,tsType:{name:"string"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"Option"}],raw:"Option[]"},description:""},value:{required:!0,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string | number) => void",signature:{arguments:[{type:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},name:"value"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const{userEvent:be,within:Ie,expect:Re}=__STORYBOOK_MODULE_TEST__,wn=[{value:1,label:"Dessert"},{value:2,label:"Main Dish"},{value:3,label:"Starter"}],Nn={title:"Forms/Select",component:ue,parameters:{layout:"centered"},args:{label:"Recipe Category",options:wn,placeholder:"Choose a category..."}},ze=e=>{const[n,t]=r.useState(void 0);return v.jsx("div",{className:"w-72",children:v.jsx(ue,{...e,value:n,onChange:o=>{t(o),e.onChange?.(o)}})})},ne={render:e=>v.jsx(ze,{...e})},oe={args:{value:{value:2,label:"Main Dish"}},render:e=>v.jsx(ze,{...e})},$n=[{value:"1",label:"Option One"},{value:"2",label:"Option Two"},{value:"3",label:"Option Three"},{value:"4",label:"Option Four"},{value:"5",label:"Option Last"}],ae={render:()=>{const[e,n]=r.useState(!1),[t,o]=r.useState("");return v.jsxs("div",{className:"p-10 text-center",children:[v.jsx(_t,{onClick:()=>n(!0),children:"Open Modal"}),v.jsx(At,{open:e,onClose:()=>n(!1),children:v.jsxs("div",{className:"p-6",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 text-text-primary",children:"Settings"}),v.jsx("div",{className:"h-125 bg-surface-base/20 rounded flex items-center justify-center text-text-secondary italic border-2 border-dashed border-border mb-6",children:"Long Content Area (Scroll down)"}),v.jsx(ue,{label:"Bottom Select",placeholder:"Choose an option...",options:$n,value:t,onChange:o})]})})]})},play:async({canvasElement:e,step:n})=>{const t=Ie(e);await n("Open the modal",async()=>{const a=t.getByRole("button",{name:/Open Modal/i});await be.click(a)});const o=Ie(document.body);await n("Find Select by its Label",async()=>{await o.findByText("Settings");const a=await o.findByRole("button",{name:/Bottom Select/i});a.scrollIntoView(),await Re(a).toBeVisible(),await be.click(a)}),await n("Verify auto-positioning (Collision)",async()=>{const a=await o.findByText("Option Last"),s=a.getBoundingClientRect(),u=s.top>=0&&s.bottom<=window.innerHeight;Re(u).toBe(!0),await be.click(a)})}};ne.parameters={...ne.parameters,docs:{...ne.parameters?.docs,source:{originalSource:`{
  render: args => <SelectTemplate {...args} />
}`,...ne.parameters?.docs?.source}}};oe.parameters={...oe.parameters,docs:{...oe.parameters?.docs,source:{originalSource:`{
  args: {
    value: {
      value: 2,
      label: 'Main Dish'
    }
  },
  render: args => <SelectTemplate {...args} />
}`,...oe.parameters?.docs?.source}}};ae.parameters={...ae.parameters,docs:{...ae.parameters?.docs,source:{originalSource:`{
  render: () => {
    const [isOpen, setIsOpen] = useState(false);
    const [val, setVal] = useState<string | number>('');
    return <div className="p-10 text-center">
        <Button onClick={() => setIsOpen(true)}>Open Modal</Button>

        <Modal open={isOpen} onClose={() => setIsOpen(false)}>
          <div className="p-6">
            <h2 className="text-xl font-bold mb-4 text-text-primary">Settings</h2>

            <div className="h-125 bg-surface-base/20 rounded flex items-center justify-center text-text-secondary italic border-2 border-dashed border-border mb-6">
              Long Content Area (Scroll down)
            </div>

            <Select label="Bottom Select" placeholder="Choose an option..." options={options} value={val} onChange={setVal} />
          </div>
        </Modal>
      </div>;
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = within(canvasElement);
    await step('Open the modal', async () => {
      const openButton = canvas.getByRole('button', {
        name: /Open Modal/i
      });
      await userEvent.click(openButton);
    });
    const body = within(document.body);
    await step('Find Select by its Label', async () => {
      await body.findByText('Settings');
      const selectButton = await body.findByRole('button', {
        name: /Bottom Select/i
      });
      selectButton.scrollIntoView();
      await expect(selectButton).toBeVisible();
      await userEvent.click(selectButton);
    });
    await step('Verify auto-positioning (Collision)', async () => {
      const lastOption = await body.findByText('Option Last');
      const rect = lastOption.getBoundingClientRect();
      const isInViewport = rect.top >= 0 && rect.bottom <= window.innerHeight;
      expect(isInViewport).toBe(true);
      await userEvent.click(lastOption);
    });
  }
}`,...ae.parameters?.docs?.source}}};const Bn=["Default","Preselected","InsideModalCollision"];export{ne as Default,ae as InsideModalCollision,oe as Preselected,Bn as __namedExportsOrder,Nn as default};
