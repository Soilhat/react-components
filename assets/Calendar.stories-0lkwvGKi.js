import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as $}from"./iframe-D4mNC2yH.js";import{B as D}from"./Button-DoPp-n9R.js";import"./preload-helper-PPVm8Dsz.js";function E(e){return e<10?`0${e}`:`${e}`}function h(e){return`${e.getFullYear()}-${E(e.getMonth()+1)}-${E(e.getDate())}`}function T(e,a){const u=new Date(e,a,1),s=new Date(e,a+1,0),r=[],d=new Date(u);d.setDate(u.getDate()-d.getDay());const i=new Date(s);i.setDate(s.getDate()+(6-i.getDay()));for(let o=new Date(d);o<=i;o.setDate(o.getDate()+1))r.push(new Date(o));const c=[];for(let o=0;o<r.length;o+=7)c.push(r.slice(o,o+7));return c}function R(e){if(typeof e!="object"||e===null)return null;const a=e;return Array.isArray(a.items)?a.items:Array.isArray(a.events)?a.events:null}function j(e){if(e!=null){if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e=="object"){const a=e;if(typeof a.title=="string")return a.title;if(typeof a.name=="string")return a.name}}}function I(e){const a=[];if(!Array.isArray(e)||e.length===0)return a;function u(s,r,d){for(const[i,c]of r.entries()){const o=s?.id?`${s.id}-${i}`:`evt-${d}-${i}`;a.push({id:s?.id,title:j(c)??`item-${i}`,key:o})}}for(const[s,r]of e.entries()){if(r==null)continue;const d=R(r);if(d?.length){u(r??void 0,d,s);continue}if(typeof r=="object"){const c=r,o=c.id??`evt-${s}`,w=c.title??c.name??j(c)??o;a.push({id:o,title:w,key:o});continue}const i=`evt-${s}`;a.push({id:i,title:j(r)??i,key:i})}return a}const O=({dayEvents:e,onEventClick:a})=>{const u=I(e??[]);return u.length===0?null:n.jsx("div",{className:"flex flex-col gap-1.5 w-full",children:u.map(s=>n.jsx(D,{onClick:()=>s.id&&a?.(s.id),title:s.title,"aria-label":s.title,color_name:"light",className:"text-left text-xs p-1.5 w-full h-auto min-h-fit leading-tight border-none bg-primary/10 hover:bg-primary/20 text-primary-dark dark:text-primary",children:n.jsx("div",{className:"line-clamp-2 break-words overflow-hidden",children:s.title})},s.key))})},A=({d:e,isCurrentMonth:a,dayEvents:u,actionLabel:s,onAction:r,onEventClick:d,containerClass:i})=>{const c=h(e),o=e.toLocaleDateString(void 0,{weekday:"short"});return n.jsxs("div",{className:`${i} border rounded-xl p-3 transition-all ${a?"bg-surface-panel dark:bg-surface-panel-dark shadow-sm":"bg-surface-base/50 dark:bg-surface-base-dark/50 opacity-60"} border-border dark:border-border-dark flex flex-col gap-2`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:`text-lg font-bold ${a?"text-text-primary dark:text-text-primary-dark":"text-text-secondary"}`,children:e.getDate()}),n.jsx("span",{className:"sm:hidden text-xs font-medium uppercase tracking-wider text-text-secondary",children:o})]}),n.jsx(D,{type:"button",onClick:()=>r?.(e),color_name:"primary",className:"py-1 px-3 text-[10px] h-7 w-auto!",children:s})]}),n.jsx("div",{className:"flex-1",children:n.jsx(O,{dayEvents:u,onEventClick:d})})]},c)};function v({year:e,month:a,title:u,onPrev:s,onNext:r,onAction:d,onEventClick:i,eventsByDate:c={},actionLabel:o="Plan",initialView:w}){const[l,f]=$.useState(new Date(e,a,1)),[g,N]=$.useState(w??"month"),Y=T(l.getFullYear(),l.getMonth()).flat(),k=new Date(l);k.setDate(l.getDate()-l.getDay());const C=[];for(let t=0;t<7;t++){const M=new Date(k);M.setDate(k.getDate()+t),C.push(M)}const _=()=>{if(g==="month"){const t=new Date(l.getFullYear(),l.getMonth()-1,1);f(t)}else{const t=new Date(l);t.setDate(t.getDate()-7),f(t)}s?.()},L=()=>{if(g==="month"){const t=new Date(l.getFullYear(),l.getMonth()+1,1);f(t)}else{const t=new Date(l);t.setDate(t.getDate()+7),f(t)}r?.()},b=g==="month"?Y:C,W=g==="month"?b.filter(t=>t.getMonth()===l.getMonth()):b;return n.jsxs("div",{className:"w-full max-w-full overflow-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[n.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:u??`${l.toLocaleString(void 0,{month:"long",year:"numeric"})}`}),n.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2",children:[n.jsxs("div",{className:"flex bg-surface-panel dark:bg-surface-panel-dark p-1 rounded-lg border border-border dark:border-border-dark",children:[n.jsx("button",{onClick:()=>N("month"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${g==="month"?"bg-primary text-white shadow-md":"text-text-secondary"}`,children:"Month"}),n.jsx("button",{onClick:()=>N("week"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${g==="week"?"bg-primary text-white shadow-md":"text-text-secondary"}`,children:"Week"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(D,{onClick:_,color_name:"light",className:"px-3",children:"Prev"}),n.jsx(D,{onClick:L,color_name:"light",className:"px-3",children:"Next"})]})]})]}),n.jsx("div",{className:"hidden sm:grid sm:grid-cols-7 gap-3 mb-2 px-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(t=>n.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-text-secondary dark:text-text-secondary-dark opacity-70",children:t},t))}),n.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-7",children:[n.jsx("div",{className:"contents sm:hidden",children:W.map(t=>n.jsx(A,{d:t,isCurrentMonth:t.getMonth()===l.getMonth(),dayEvents:c[h(t)]??[],actionLabel:o,onAction:d,onEventClick:i,containerClass:"min-h-[5rem]"},`mob-${h(t)}`))}),n.jsx("div",{className:"hidden sm:contents",children:b.map(t=>n.jsx(A,{d:t,isCurrentMonth:t.getMonth()===l.getMonth(),dayEvents:c[h(t)]??[],actionLabel:o,onAction:d,onEventClick:i,containerClass:g==="week"?"min-h-[12rem]":"min-h-[8rem]"},`dt-${h(t)}`))})]})]})}v.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{eventsByDate:{defaultValue:{value:"{}",computed:!1},required:!1},actionLabel:{defaultValue:{value:"'Plan'",computed:!1},required:!1}}};const K={title:"Data Display/Calendar",component:v,parameters:{layout:"centered"}},m=new Date,p=e=>e.toISOString().slice(0,10),S=new Date(m);S.setDate(m.getDate()+1);const P=new Date(m);P.setDate(m.getDate()+3);const F=new Date(m);F.setDate(m.getDate()-2);const V=new Date(m);V.setDate(m.getDate()+7);const B={[p(m)]:[{id:"evt-today-1",title:"Team Meeting"},{id:"evt-today-2",title:"1:1",items:[{title:"Discuss roadmap for long text implementation"}]}],[p(S)]:[{id:"evt-tomorrow-1",title:"Deploy"}],[p(P)]:[{id:"evt-deadline",title:"Project Deadline"},{id:"evt-workshop",title:"Workshop",items:[{title:"Prep"},{title:"Run"}]}],[p(F)]:[{id:"evt-past",title:"Client Call"}],[p(V)]:[{id:"evt-events-1",events:[{name:"Recipe A"},{name:"Recipe B"}]}]},x={render:()=>n.jsx(v,{year:m.getFullYear(),month:m.getMonth(),eventsByDate:B,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})},y={render:()=>n.jsx(v,{year:m.getFullYear(),month:m.getMonth(),initialView:"week",eventsByDate:B,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...x.parameters?.docs?.source}}};y.parameters={...y.parameters,docs:{...y.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} initialView="week" eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...y.parameters?.docs?.source}}};const Q=["MonthView","WeekView"];export{x as MonthView,y as WeekView,Q as __namedExportsOrder,K as default};
