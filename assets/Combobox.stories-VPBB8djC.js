import{j as w}from"./jsx-runtime-u17CrQMm.js";import{r as f,R as j}from"./iframe-D4mNC2yH.js";import{D as Ne,o as k,af as Ie,w as je,ag as ot,ah as st,T as it,d as A,u as ie,x as Ve,b as at,p as rt,c as ce,f as Te,e as lt,G as ut,g as ct,Y as pe,Z as dt,_ as pt,t as Se,$ as ht,S as D,v as ft,a4 as Ee,a5 as mt,a6 as We,a7 as Be,z as he,V as Ce,K as fe,a1 as gt,a2 as ue,a as vt,a3 as bt,a8 as xt,a9 as yt,y as St,R as Ot,s as Et,h as Me,i as Ct,N as wt,m as It,q as Tt,r as Mt,n as ne,A as $t,B as $e,C as Rt,E as kt,F as Pt,H as Ft,I as At,J as Dt,L as zt,j as ye,M as Re,O as U,X as _t,ai as Lt,aj as Nt,aa as jt}from"./transition-CWgyrsVZ.js";import{r as te}from"./index-BZEDkz87.js";import{u as ke,s as Vt,l as Wt,b as Bt,a as Ut,j as Gt,F as qt,c as Kt}from"./frozen-_9dtcILy.js";import{F as Ht}from"./use-tree-walker-TOZjPT6S.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CgyvXt5y.js";function Yt({title:t,titleId:s,...e},o){return f.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":s},e),t?f.createElement("title",{id:s},t):null,f.createElement("path",{fillRule:"evenodd",d:"M9 3.5a5.5 5.5 0 1 0 0 11 5.5 5.5 0 0 0 0-11ZM2 9a7 7 0 1 1 12.452 4.391l3.328 3.329a.75.75 0 1 1-1.06 1.06l-3.329-3.328A7 7 0 0 1 2 9Z",clipRule:"evenodd"}))}const Xt=f.forwardRef(Yt);function se(t,s,e){let o=e.initialDeps??[],n,i=!0;function a(){var r,u,c;let d;e.key&&((r=e.debug)!=null&&r.call(e))&&(d=Date.now());const v=t();if(!(v.length!==o.length||v.some((p,b)=>o[b]!==p)))return n;o=v;let h;if(e.key&&((u=e.debug)!=null&&u.call(e))&&(h=Date.now()),n=s(...v),e.key&&((c=e.debug)!=null&&c.call(e))){const p=Math.round((Date.now()-d)*100)/100,b=Math.round((Date.now()-h)*100)/100,x=b/16,M=($,R)=>{for($=String($);$.length<R;)$=" "+$;return $};console.info(`%c⏱ ${M(b,5)} /${M(p,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*x,120))}deg 100% 31%);`,e?.key)}return e?.onChange&&!(i&&e.skipInitialOnChange)&&e.onChange(n),i=!1,n}return a.updateDeps=r=>{o=r},a}function Pe(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const Zt=(t,s)=>Math.abs(t-s)<1.01,Jt=(t,s,e)=>{let o;return function(...n){t.clearTimeout(o),o=t.setTimeout(()=>s.apply(this,n),e)}},Fe=t=>{const{offsetWidth:s,offsetHeight:e}=t;return{width:s,height:e}},Qt=t=>t,en=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),o=[];for(let n=s;n<=e;n++)o.push(n);return o},tn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;const n=a=>{const{width:r,height:u}=a;s({width:Math.round(r),height:Math.round(u)})};if(n(Fe(e)),!o.ResizeObserver)return()=>{};const i=new o.ResizeObserver(a=>{const r=()=>{const u=a[0];if(u?.borderBoxSize){const c=u.borderBoxSize[0];if(c){n({width:c.inlineSize,height:c.blockSize});return}}n(Fe(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},Ae={passive:!0},De=typeof window>"u"?!0:"onscrollend"in window,nn=(t,s)=>{const e=t.scrollElement;if(!e)return;const o=t.targetWindow;if(!o)return;let n=0;const i=t.options.useScrollendEvent&&De?()=>{}:Jt(o,()=>{s(n,!1)},t.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:v,isRtl:l}=t.options;n=v?e.scrollLeft*(l&&-1||1):e.scrollTop,i(),s(n,d)},r=a(!0),u=a(!1);u(),e.addEventListener("scroll",r,Ae);const c=t.options.useScrollendEvent&&De;return c&&e.addEventListener("scrollend",u,Ae),()=>{e.removeEventListener("scroll",r),c&&e.removeEventListener("scrollend",u)}},on=(t,s,e)=>{if(s?.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},sn=(t,{adjustments:s=0,behavior:e},o)=>{var n,i;const a=t+s;(i=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||i.call(n,{[o.options.horizontal?"left":"top"]:a,behavior:e})};class an{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const o=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(i=>{const a=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var n;(n=o())==null||n.disconnect(),e=null},observe:n=>{var i;return(i=o())==null?void 0:i.observe(n,{box:"border-box"})},unobserve:n=>{var i;return(i=o())==null?void 0:i.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([o,n])=>{typeof n>"u"&&delete e[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Qt,rangeExtractor:en,onChange:()=>{},measureElement:on,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var o,n;(n=(o=this.options).onChange)==null||n.call(o,this,e)},this.maybeNotify=se(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.maybeNotify();return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,o)=>{const n=new Map,i=new Map;for(let a=o-1;a>=0;a--){const r=e[a];if(n.has(r.lane))continue;const u=i.get(r.lane);if(u==null||r.end>u.end?i.set(r.lane,r):r.end<u.end&&n.set(r.lane,!0),n.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((a,r)=>a.end===r.end?a.index-r.index:a.end-r.end)[0]:void 0},this.getMeasurementOptions=se(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,o,n,i,a,r)=>(this.prevLanes!==void 0&&this.prevLanes!==r&&(this.lanesChangedFlag=!0),this.prevLanes=r,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a,lanes:r}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=se(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:o,scrollMargin:n,getItemKey:i,enabled:a,lanes:r},u)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const l of this.laneAssignments.keys())l>=e&&this.laneAssignments.delete(l);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(l=>{this.itemSizeCache.set(l.key,l.size)}));const c=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const d=this.measurementsCache.slice(0,c),v=new Array(r).fill(void 0);for(let l=0;l<c;l++){const h=d[l];h&&(v[h.lane]=l)}for(let l=c;l<e;l++){const h=i(l),p=this.laneAssignments.get(l);let b,x;if(p!==void 0&&this.options.lanes>1){b=p;const O=v[b],z=O!==void 0?d[O]:void 0;x=z?z.end+this.options.gap:o+n}else{const O=this.options.lanes===1?d[l-1]:this.getFurthestMeasurement(d,l);x=O?O.end+this.options.gap:o+n,b=O?O.lane:l%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(l,b)}const M=u.get(h),$=typeof M=="number"?M:this.options.estimateSize(l),R=x+$;d[l]={index:l,start:x,size:$,end:R,key:h,lane:b},v[b]=l}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=se(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,o,n,i)=>this.range=e.length>0&&o>0?rn({measurements:e,outerSize:o,scrollOffset:n,lanes:i}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=se(()=>{let e=null,o=null;const n=this.calculateRange();return n&&(e=n.startIndex,o=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,o]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,o]},(e,o,n,i,a)=>i===null||a===null?[]:e({startIndex:i,endIndex:a,overscan:o,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const o=this.options.indexAttribute,n=e.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(e,o)=>{const n=this.indexFromElement(e),i=this.measurementsCache[n];if(!i)return;const a=i.key,r=this.elementsCache.get(a);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(a,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,o,this))},this.resizeItem=(e,o)=>{const n=this.measurementsCache[e];if(!n)return;const i=this.itemSizeCache.get(n.key)??n.size,a=o-i;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,a,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((o,n)=>{o.isConnected||(this.observer.unobserve(o),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=se(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,o)=>{const n=[];for(let i=0,a=e.length;i<a;i++){const r=e[i],u=o[r];n.push(u)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const o=this.getMeasurements();if(o.length!==0)return Pe(o[Ue(0,o.length-1,n=>Pe(o[n]).start,e)])},this.getOffsetForAlignment=(e,o,n=0)=>{const i=this.getSize(),a=this.getScrollOffset();o==="auto"&&(o=e>=a+i?"end":"start"),o==="center"?e+=(n-i)/2:o==="end"&&(e-=i);const r=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,o="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const i=this.getSize(),a=this.getScrollOffset();if(o==="auto")if(n.end>=a+i-this.options.scrollPaddingEnd)o="end";else if(n.start<=a+this.options.scrollPaddingStart)o="start";else return[a,o];const r=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,o,n.size),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:o="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:o="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let i=0;const a=10,r=c=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(e,c);if(!d){console.warn("Failed to get offset for index:",e);return}const[v,l]=d;this._scrollToOffset(v,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const h=this.getScrollOffset(),p=this.getOffsetForIndex(e,l);if(!p){console.warn("Failed to get offset for index:",e);return}Zt(p[0],h)||u(l)})},u=c=>{this.targetWindow&&(i++,i<a?this.targetWindow.requestAnimationFrame(()=>r(c)):console.warn(`Failed to scroll to index ${e} after ${a} attempts.`))};r(o)},this.scrollBy=(e,{behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var e;const o=this.getMeasurements();let n;if(o.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=o[o.length-1])==null?void 0:e.end)??0;else{const i=Array(this.options.lanes).fill(null);let a=o.length-1;for(;a>=0&&i.some(r=>r===null);){const r=o[a];i[r.lane]===null&&(i[r.lane]=r.end),a--}n=Math.max(...i.filter(r=>r!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:o,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:o},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(s)}}const Ue=(t,s,e,o)=>{for(;t<=s;){const n=(t+s)/2|0,i=e(n);if(i<o)t=n+1;else if(i>o)s=n-1;else return n}return t>0?t-1:0};function rn({measurements:t,outerSize:s,scrollOffset:e,lanes:o}){const n=t.length-1,i=u=>t[u].start;if(t.length<=o)return{startIndex:0,endIndex:n};let a=Ue(0,n,i,e),r=a;if(o===1)for(;r<n&&t[r].end<e+s;)r++;else if(o>1){const u=Array(o).fill(0);for(;r<n&&u.some(d=>d<e+s);){const d=t[r];u[d.lane]=d.end,r++}const c=Array(o).fill(e+s);for(;a>=0&&c.some(d=>d>=e);){const d=t[a];c[d.lane]=d.start,a--}a=Math.max(0,a-a%o),r=Math.min(n,r+(o-1-r%o))}return{startIndex:a,endIndex:r}}const ze=typeof document<"u"?f.useLayoutEffect:f.useEffect;function ln(t){const s=f.useReducer(()=>({}),{})[1],e={...t,onChange:(n,i)=>{var a;i?te.flushSync(s):s(),(a=t.onChange)==null||a.call(t,n,i)}},[o]=f.useState(()=>new an(e));return o.setOptions(e),ze(()=>o._didMount(),[]),ze(()=>o._willUpdate()),o}function un(t){return ln({observeElementRect:tn,observeElementOffset:nn,scrollToFn:sn,...t})}function cn(t,s,e,o){let n=Ne(e);f.useEffect(()=>{t=t??window;function i(a){n.current(a)}return t.addEventListener(s,i,o),()=>t.removeEventListener(s,i,o)},[t,s,o])}function Ge(t){let s=f.useRef({value:"",selectionStart:null,selectionEnd:null});return cn(t,"blur",e=>{let o=e.target;Ie(o)&&(s.current={value:o.value,selectionStart:o.selectionStart,selectionEnd:o.selectionEnd})}),k(()=>{if(!je(t)&&Ie(t)&&t.isConnected){if(t.focus({preventScroll:!0}),t.value!==s.current.value)t.setSelectionRange(t.value.length,t.value.length);else{let{selectionStart:e,selectionEnd:o}=s.current;e!==null&&o!==null&&t.setSelectionRange(e,o)}s.current={value:"",selectionStart:null,selectionEnd:null}}})}function _e(t,s){let e=f.useRef([]),o=k(t);f.useEffect(()=>{let n=[...e.current];for(let[i,a]of s.entries())if(e.current[i]!==a){let r=o(s,n);return e.current=s,r}},[o,...s])}function dn(t){function s(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",s))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",s),s())}let ee=[];dn(()=>{function t(s){if(!ot(s.target)||s.target===document.body||ee[0]===s.target)return;let e=s.target;e=e.closest(st),ee.unshift(e??s.target),ee=ee.filter(o=>o!=null&&o.isConnected),ee.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});var pn=Object.defineProperty,hn=(t,s,e)=>s in t?pn(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,Le=(t,s,e)=>(hn(t,typeof s!="symbol"?s+"":s,e),e),g=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(g||{}),q=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(q||{}),X=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(X||{}),qe=(t=>(t[t.OpenCombobox=0]="OpenCombobox",t[t.CloseCombobox=1]="CloseCombobox",t[t.GoToOption=2]="GoToOption",t[t.SetTyping=3]="SetTyping",t[t.RegisterOption=4]="RegisterOption",t[t.UnregisterOption=5]="UnregisterOption",t[t.DefaultToFirstOption=6]="DefaultToFirstOption",t[t.SetActivationTrigger=7]="SetActivationTrigger",t[t.UpdateVirtualConfiguration=8]="UpdateVirtualConfiguration",t[t.SetInputElement=9]="SetInputElement",t[t.SetButtonElement=10]="SetButtonElement",t[t.SetOptionsElement=11]="SetOptionsElement",t[t.MarkInputAsMoved=12]="MarkInputAsMoved",t))(qe||{});function Oe(t,s=e=>e){let e=t.activeOptionIndex!==null?t.options[t.activeOptionIndex]:null,o=s(t.options.slice()),n=o.length>0&&o[0].dataRef.current.order!==null?o.sort((a,r)=>a.dataRef.current.order-r.dataRef.current.order):ut(o,a=>a.dataRef.current.domRef.current),i=e?n.indexOf(e):null;return i===-1&&(i=null),{options:n,activeOptionIndex:i}}let fn={1(t){var s;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===1)return t;let e=t.inputElement?ce.Tracked(lt(t.inputElement)):t.inputPositionState;return{...t,activeOptionIndex:null,comboboxState:1,isTyping:!1,activationTrigger:2,inputPositionState:e,__demoMode:!1}},0(t){var s,e;if((s=t.dataRef.current)!=null&&s.disabled||t.comboboxState===0)return t;if((e=t.dataRef.current)!=null&&e.value){let o=t.dataRef.current.calculateIndex(t.dataRef.current.value);if(o!==-1)return{...t,activeOptionIndex:o,comboboxState:0,__demoMode:!1,inputPositionState:ce.Idle}}return{...t,comboboxState:0,inputPositionState:ce.Idle,__demoMode:!1}},3(t,s){return t.isTyping===s.isTyping?t:{...t,isTyping:s.isTyping}},2(t,s){var e,o,n,i;if((e=t.dataRef.current)!=null&&e.disabled||t.optionsElement&&!((o=t.dataRef.current)!=null&&o.optionsPropsRef.current.static)&&t.comboboxState===1)return t;if(t.virtual){let{options:c,disabled:d}=t.virtual,v=s.focus===A.Specific?s.idx:Te(s,{resolveItems:()=>c,resolveActiveIndex:()=>{var h,p;return(p=(h=t.activeOptionIndex)!=null?h:c.findIndex(b=>!d(b)))!=null?p:null},resolveDisabled:d,resolveId(){throw new Error("Function not implemented.")}}),l=(n=s.trigger)!=null?n:2;return t.activeOptionIndex===v&&t.activationTrigger===l?t:{...t,activeOptionIndex:v,activationTrigger:l,isTyping:!1,__demoMode:!1}}let a=Oe(t);if(a.activeOptionIndex===null){let c=a.options.findIndex(d=>!d.dataRef.current.disabled);c!==-1&&(a.activeOptionIndex=c)}let r=s.focus===A.Specific?s.idx:Te(s,{resolveItems:()=>a.options,resolveActiveIndex:()=>a.activeOptionIndex,resolveId:c=>c.id,resolveDisabled:c=>c.dataRef.current.disabled}),u=(i=s.trigger)!=null?i:2;return t.activeOptionIndex===r&&t.activationTrigger===u?t:{...t,...a,isTyping:!1,activeOptionIndex:r,activationTrigger:u,__demoMode:!1}},4:(t,s)=>{var e,o,n,i;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:[...t.options,s.payload]};let a=s.payload,r=Oe(t,c=>(c.push(a),c));t.activeOptionIndex===null&&(n=(o=t.dataRef.current).isSelected)!=null&&n.call(o,s.payload.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(a));let u={...t,...r,activationTrigger:2};return(i=t.dataRef.current)!=null&&i.__demoMode&&t.dataRef.current.value===void 0&&(u.activeOptionIndex=0),u},5:(t,s)=>{var e;if((e=t.dataRef.current)!=null&&e.virtual)return{...t,options:t.options.filter(n=>n.id!==s.id)};let o=Oe(t,n=>{let i=n.findIndex(a=>a.id===s.id);return i!==-1&&n.splice(i,1),n});return{...t,...o,activationTrigger:2}},6:(t,s)=>t.defaultToFirstOption===s.value?t:{...t,defaultToFirstOption:s.value},7:(t,s)=>t.activationTrigger===s.trigger?t:{...t,activationTrigger:s.trigger},8:(t,s)=>{var e,o;if(t.virtual===null)return{...t,virtual:{options:s.options,disabled:(e=s.disabled)!=null?e:()=>!1}};if(t.virtual.options===s.options&&t.virtual.disabled===s.disabled)return t;let n=t.activeOptionIndex;if(t.activeOptionIndex!==null){let i=s.options.indexOf(t.virtual.options[t.activeOptionIndex]);i!==-1?n=i:n=null}return{...t,activeOptionIndex:n,virtual:{options:s.options,disabled:(o=s.disabled)!=null?o:()=>!1}}},9:(t,s)=>t.inputElement===s.element?t:{...t,inputElement:s.element},10:(t,s)=>t.buttonElement===s.element?t:{...t,buttonElement:s.element},11:(t,s)=>t.optionsElement===s.element?t:{...t,optionsElement:s.element},12(t){return t.inputPositionState.kind!=="Tracked"?t:{...t,inputPositionState:ce.Moved}}};class we extends it{constructor(s){super(s),Le(this,"actions",{onChange:e=>{let{onChange:o,compare:n,mode:i,value:a}=this.state.dataRef.current;return ie(i,{0:()=>o?.(e),1:()=>{let r=a.slice(),u=r.findIndex(c=>n(c,e));return u===-1?r.push(e):r.splice(u,1),o?.(r)}})},registerOption:(e,o)=>(this.send({type:4,payload:{id:e,dataRef:o}}),()=>{this.state.activeOptionIndex===this.state.dataRef.current.calculateIndex(o.current.value)&&this.send({type:6,value:!0}),this.send({type:5,id:e})}),goToOption:(e,o)=>(this.send({type:6,value:!1}),this.send({type:2,...e,trigger:o})),setIsTyping:e=>{this.send({type:3,isTyping:e})},closeCombobox:()=>{var e,o;this.send({type:1}),this.send({type:6,value:!1}),(o=(e=this.state.dataRef.current).onClose)==null||o.call(e)},openCombobox:()=>{this.send({type:0}),this.send({type:6,value:!0})},setActivationTrigger:e=>{this.send({type:7,trigger:e})},selectActiveOption:()=>{let e=this.selectors.activeOptionIndex(this.state);if(e!==null){if(this.actions.setIsTyping(!1),this.state.virtual)this.actions.onChange(this.state.virtual.options[e]);else{let{dataRef:o}=this.state.options[e];this.actions.onChange(o.current.value)}this.actions.goToOption({focus:A.Specific,idx:e})}},setInputElement:e=>{this.send({type:9,element:e})},setButtonElement:e=>{this.send({type:10,element:e})},setOptionsElement:e=>{this.send({type:11,element:e})}}),Le(this,"selectors",{activeDescendantId:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);if(i!==null)return e.virtual?(n=e.options.find(a=>!a.dataRef.current.disabled&&e.dataRef.current.compare(a.dataRef.current.value,e.virtual.options[i])))==null?void 0:n.id:(o=e.options[i])==null?void 0:o.id},activeOptionIndex:e=>{if(e.defaultToFirstOption&&e.activeOptionIndex===null&&(e.virtual?e.virtual.options.length>0:e.options.length>0)){if(e.virtual){let{options:n,disabled:i}=e.virtual,a=n.findIndex(r=>{var u;return!((u=i?.(r))!=null&&u)});if(a!==-1)return a}let o=e.options.findIndex(n=>!n.dataRef.current.disabled);if(o!==-1)return o}return e.activeOptionIndex},activeOption:e=>{var o,n;let i=this.selectors.activeOptionIndex(e);return i===null?null:e.virtual?e.virtual.options[i??0]:(n=(o=e.options[i])==null?void 0:o.dataRef.current.value)!=null?n:null},isActive:(e,o,n)=>{var i;let a=this.selectors.activeOptionIndex(e);return a===null?!1:e.virtual?a===e.dataRef.current.calculateIndex(o):((i=e.options[a])==null?void 0:i.id)===n},shouldScrollIntoView:(e,o,n)=>!(e.virtual||e.__demoMode||e.comboboxState!==0||e.activationTrigger===0||!this.selectors.isActive(e,o,n)),didInputMove(e){return e.inputPositionState.kind==="Moved"}});{let e=this.state.id,o=Ve.get(null);this.disposables.add(o.on(at.Push,n=>{!o.selectors.isTop(n,e)&&this.state.comboboxState===0&&this.actions.closeCombobox()})),this.on(0,()=>o.actions.push(e)),this.on(1,()=>o.actions.pop(e))}this.disposables.group(e=>{this.on(1,o=>{o.inputElement&&(e.dispose(),e.add(rt(o.inputElement,o.inputPositionState,()=>{this.send({type:12})})))})})}static new({id:s,virtual:e=null,__demoMode:o=!1}){var n;return new we({id:s,dataRef:{current:{}},comboboxState:o?0:1,isTyping:!1,options:[],virtual:e?{options:e.options,disabled:(n=e.disabled)!=null?n:()=>!1}:null,activeOptionIndex:null,activationTrigger:2,inputElement:null,buttonElement:null,optionsElement:null,__demoMode:o,inputPositionState:ce.Idle})}reduce(s,e){return ie(e.type,fn,s,e)}}const Ke=f.createContext(null);function me(t){let s=f.useContext(Ke);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,He),e}return s}function He({id:t,virtual:s=null,__demoMode:e=!1}){let o=f.useMemo(()=>we.new({id:t,virtual:s,__demoMode:e}),[]);return ct(()=>o.dispose()),o}let de=f.createContext(null);de.displayName="ComboboxDataContext";function ae(t){let s=f.useContext(de);if(s===null){let e=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,ae),e}return s}let Ye=f.createContext(null);function mn(t){let s=me("VirtualProvider"),e=ae("VirtualProvider"),{options:o}=e.virtual,n=D(s,h=>h.optionsElement),[i,a]=f.useMemo(()=>{let h=n;if(!h)return[0,0];let p=window.getComputedStyle(h);return[parseFloat(p.paddingBlockStart||p.paddingTop),parseFloat(p.paddingBlockEnd||p.paddingBottom)]},[n]),r=un({enabled:o.length!==0,scrollPaddingStart:i,scrollPaddingEnd:a,count:o.length,estimateSize(){return 40},getScrollElement(){return s.state.optionsElement},overscan:12}),[u,c]=f.useState(0);ne(()=>{c(h=>h+1)},[o]);let d=r.getVirtualItems(),v=D(s,h=>h.activationTrigger===X.Pointer),l=D(s,s.selectors.activeOptionIndex);return d.length===0?null:j.createElement(Ye.Provider,{value:r},j.createElement("div",{style:{position:"relative",width:"100%",height:`${r.getTotalSize()}px`},ref:h=>{h&&(v||l!==null&&o.length>l&&r.scrollToIndex(l))}},d.map(h=>{var p;return j.createElement(f.Fragment,{key:h.key},j.cloneElement((p=t.children)==null?void 0:p.call(t,{...t.slot,option:o[h.index]}),{key:`${u}-${h.key}`,"data-index":h.index,"aria-setsize":o.length,"aria-posinset":h.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${h.start}px)`,overflowAnchor:"none"}}))})))}let gn=f.Fragment;function vn(t,s){let e=f.useId(),o=Pt(),{value:n,defaultValue:i,onChange:a,form:r,name:u,by:c,invalid:d=!1,disabled:v=o||!1,onClose:l,__demoMode:h=!1,multiple:p=!1,immediate:b=!1,virtual:x=null,nullable:M,...$}=t,R=Wt(i),[O=p?[]:void 0,z]=Bt(n,a,R),S=He({id:e,virtual:x,__demoMode:h}),V=f.useRef({static:!1,hold:!1}),P=Ut(c),L=k(C=>x?c===null?x.options.indexOf(C):x.options.findIndex(Q=>P(Q,C)):S.state.options.findIndex(Q=>P(Q.dataRef.current.value,C))),H=f.useCallback(C=>ie(W.mode,{[q.Multi]:()=>O.some(Q=>P(Q,C)),[q.Single]:()=>P(O,C)}),[O]),Y=D(S,C=>C.virtual),y=k(()=>l?.()),W=f.useMemo(()=>({__demoMode:h,immediate:b,optionsPropsRef:V,value:O,defaultValue:R,disabled:v,invalid:d,mode:p?q.Multi:q.Single,virtual:x?Y:null,onChange:z,isSelected:H,calculateIndex:L,compare:P,onClose:y}),[h,b,V,O,R,v,d,p,x,Y,z,H,L,P,y]);ne(()=>{var C;x&&S.send({type:qe.UpdateVirtualConfiguration,options:x.options,disabled:(C=x.disabled)!=null?C:null})},[x,x?.options,x?.disabled]),ne(()=>{S.state.dataRef.current=W},[W]);let[B,E,K,re]=D(S,C=>[C.comboboxState,C.buttonElement,C.inputElement,C.optionsElement]),Z=Ve.get(null),oe=D(Z,f.useCallback(C=>Z.selectors.isTop(C,e),[Z,e]));Ft(oe,[E,K,re],()=>S.actions.closeCombobox());let J=D(S,S.selectors.activeOptionIndex),le=D(S,S.selectors.activeOption),m=he({open:B===g.Open,disabled:v,invalid:d,activeIndex:J,activeOption:le,value:O}),[G,T]=At(),_=s===null?{}:{ref:s},I=f.useCallback(()=>{if(R!==void 0)return z?.(R)},[z,R]),N=fe();return j.createElement(T,{value:G,props:{htmlFor:K?.id},slot:{open:B===g.Open,disabled:v}},j.createElement(Dt,null,j.createElement(de.Provider,{value:W},j.createElement(Ke.Provider,{value:S},j.createElement(zt,{value:ie(B,{[g.Open]:ye.Open,[g.Closed]:ye.Closed})},u!=null&&j.createElement(Gt,{disabled:v,data:O!=null?{[u]:O}:{},form:r,onReset:I}),N({ourProps:_,theirProps:$,slot:m,defaultTag:gn,name:"Combobox"}))))))}let bn="input";function xn(t,s){var e,o;let n=me("Combobox.Input"),i=ae("Combobox.Input"),a=f.useId(),r=pt(),{id:u=r||`headlessui-combobox-input-${a}`,onChange:c,displayValue:d,disabled:v=i.disabled||!1,autoFocus:l=!1,type:h="text",...p}=t,b=f.useRef(null),x=Se(b,s,ht(),n.actions.setInputElement),[M,$]=D(n,m=>[m.comboboxState,m.isTyping]),R=ft(),O=k(()=>{n.actions.onChange(null),n.state.optionsElement&&(n.state.optionsElement.scrollTop=0),n.actions.goToOption({focus:A.Nothing})}),z=f.useMemo(()=>{var m;return typeof d=="function"&&i.value!==void 0?(m=d(i.value))!=null?m:"":typeof i.value=="string"?i.value:""},[i.value,d]);_e(([m,G],[T,_])=>{if(n.state.isTyping)return;let I=b.current;I&&((_===g.Open&&G===g.Closed||m!==T)&&(I.value=m),requestAnimationFrame(()=>{if(n.state.isTyping||!I||je(I))return;let{selectionStart:N,selectionEnd:C}=I;Math.abs((C??0)-(N??0))===0&&N===0&&I.setSelectionRange(I.value.length,I.value.length)}))},[z,M,$]),_e(([m],[G])=>{if(m===g.Open&&G===g.Closed){if(n.state.isTyping)return;let T=b.current;if(!T)return;let _=T.value,{selectionStart:I,selectionEnd:N,selectionDirection:C}=T;T.value="",T.value=_,C!==null?T.setSelectionRange(I,N,C):T.setSelectionRange(I,N)}},[M]);let S=f.useRef(!1),V=k(()=>{S.current=!0}),P=k(()=>{R.nextFrame(()=>{S.current=!1})}),L=k(m=>{switch(n.actions.setIsTyping(!0),m.key){case U.Enter:if(n.state.comboboxState!==g.Open||S.current)return;if(m.preventDefault(),m.stopPropagation(),n.selectors.activeOptionIndex(n.state)===null){n.actions.closeCombobox();return}n.actions.selectActiveOption(),i.mode===q.Single&&n.actions.closeCombobox();break;case U.ArrowDown:return m.preventDefault(),m.stopPropagation(),ie(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Next}),[g.Closed]:()=>n.actions.openCombobox()});case U.ArrowUp:return m.preventDefault(),m.stopPropagation(),ie(n.state.comboboxState,{[g.Open]:()=>n.actions.goToOption({focus:A.Previous}),[g.Closed]:()=>{te.flushSync(()=>n.actions.openCombobox()),i.value||n.actions.goToOption({focus:A.Last})}});case U.Home:if(n.state.comboboxState===g.Closed||m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),n.actions.goToOption({focus:A.First});case U.PageUp:return m.preventDefault(),m.stopPropagation(),n.actions.goToOption({focus:A.First});case U.End:if(n.state.comboboxState===g.Closed||m.shiftKey)break;return m.preventDefault(),m.stopPropagation(),n.actions.goToOption({focus:A.Last});case U.PageDown:return m.preventDefault(),m.stopPropagation(),n.actions.goToOption({focus:A.Last});case U.Escape:return n.state.comboboxState!==g.Open?void 0:(m.preventDefault(),n.state.optionsElement&&!i.optionsPropsRef.current.static&&m.stopPropagation(),i.mode===q.Single&&i.value===null&&O(),n.actions.closeCombobox());case U.Tab:if(n.actions.setIsTyping(!1),n.state.comboboxState!==g.Open)return;i.mode===q.Single&&n.state.activationTrigger!==X.Focus&&n.actions.selectActiveOption(),n.actions.closeCombobox();break}}),H=k(m=>{c?.(m),i.mode===q.Single&&m.target.value===""&&O(),n.actions.openCombobox()}),Y=k(m=>{var G,T,_;let I=(G=m.relatedTarget)!=null?G:ee.find(N=>N!==m.currentTarget);if(!((T=n.state.optionsElement)!=null&&T.contains(I))&&!((_=n.state.buttonElement)!=null&&_.contains(I))&&n.state.comboboxState===g.Open)return m.preventDefault(),i.mode===q.Single&&i.value===null&&O(),n.actions.closeCombobox()}),y=k(m=>{var G,T,_;let I=(G=m.relatedTarget)!=null?G:ee.find(N=>N!==m.currentTarget);(T=n.state.buttonElement)!=null&&T.contains(I)||(_=n.state.optionsElement)!=null&&_.contains(I)||i.disabled||i.immediate&&n.state.comboboxState!==g.Open&&R.microTask(()=>{te.flushSync(()=>n.actions.openCombobox()),n.actions.setActivationTrigger(X.Focus)})}),W=Ee(),B=mt(),{isFocused:E,focusProps:K}=We({autoFocus:l}),{isHovered:re,hoverProps:Z}=Be({isDisabled:v}),oe=D(n,m=>m.optionsElement),J=he({open:M===g.Open,disabled:v,invalid:i.invalid,hover:re,focus:E,autofocus:l}),le=Ce({ref:x,id:u,role:"combobox",type:h,"aria-controls":oe?.id,"aria-expanded":M===g.Open,"aria-activedescendant":D(n,n.selectors.activeDescendantId),"aria-labelledby":W,"aria-describedby":B,"aria-autocomplete":"list",defaultValue:(o=(e=t.defaultValue)!=null?e:i.defaultValue!==void 0?d?.(i.defaultValue):null)!=null?o:i.defaultValue,disabled:v||void 0,autoFocus:l,onCompositionStart:V,onCompositionEnd:P,onKeyDown:L,onChange:H,onFocus:y,onBlur:Y},K,Z);return fe()({ourProps:le,theirProps:p,slot:J,defaultTag:bn,name:"Combobox.Input"})}let yn="button";function Sn(t,s){let e=me("Combobox.Button"),o=ae("Combobox.Button"),[n,i]=f.useState(null),a=Se(s,i,e.actions.setButtonElement),r=f.useId(),{id:u=`headlessui-combobox-button-${r}`,disabled:c=o.disabled||!1,autoFocus:d=!1,...v}=t,[l,h,p]=D(e,y=>[y.comboboxState,y.inputElement,y.optionsElement]),b=Ge(h),x=l===g.Open;gt(x,{trigger:n,action:f.useCallback(y=>{if(n!=null&&n.contains(y.target))return ue.Ignore;if(h!=null&&h.contains(y.target))return ue.Ignore;let W=y.target.closest('[role="option"]:not([data-disabled])');return vt(W)?ue.Select(W):p!=null&&p.contains(y.target)?ue.Ignore:ue.Close},[n,h,p]),close:e.actions.closeCombobox,select:e.actions.selectActiveOption});let M=k(y=>{switch(y.key){case U.Space:case U.Enter:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===g.Closed&&te.flushSync(()=>e.actions.openCombobox()),b();return;case U.ArrowDown:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===g.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.First})),b();return;case U.ArrowUp:y.preventDefault(),y.stopPropagation(),e.state.comboboxState===g.Closed&&(te.flushSync(()=>e.actions.openCombobox()),e.state.dataRef.current.value||e.actions.goToOption({focus:A.Last})),b();return;case U.Escape:if(e.state.comboboxState!==g.Open)return;y.preventDefault(),e.state.optionsElement&&!o.optionsPropsRef.current.static&&y.stopPropagation(),te.flushSync(()=>e.actions.closeCombobox()),b();return;default:return}}),$=bt(()=>{e.state.comboboxState===g.Open?e.actions.closeCombobox():e.actions.openCombobox(),b()}),R=Ee([u]),{isFocusVisible:O,focusProps:z}=We({autoFocus:d}),{isHovered:S,hoverProps:V}=Be({isDisabled:c}),{pressed:P,pressProps:L}=xt({disabled:c}),H=he({open:l===g.Open,active:P||l===g.Open,disabled:c,invalid:o.invalid,value:o.value,hover:S,focus:O}),Y=Ce({ref:a,id:u,type:yt(t,n),tabIndex:-1,"aria-haspopup":"listbox","aria-controls":p?.id,"aria-expanded":l===g.Open,"aria-labelledby":R,disabled:c||void 0,autoFocus:d,onKeyDown:M},$,z,V,L);return fe()({ourProps:Y,theirProps:v,slot:H,defaultTag:yn,name:"Combobox.Button"})}let On="div",En=Re.RenderStrategy|Re.Static;function Cn(t,s){var e,o,n;let i=f.useId(),{id:a=`headlessui-combobox-options-${i}`,hold:r=!1,anchor:u,portal:c=!1,modal:d=!0,transition:v=!1,...l}=t,h=me("Combobox.Options"),p=ae("Combobox.Options"),b=St(u);b&&(c=!0);let[x,M]=Ot(b),[$,R]=f.useState(null),O=Et(),z=Se(s,b?x:null,h.actions.setOptionsElement,R),[S,V,P,L,H]=D(h,F=>[F.comboboxState,F.inputElement,F.buttonElement,F.optionsElement,F.activationTrigger]),Y=Me(V||P),y=Me(L),W=Ct(),[B,E]=wt(v,$,W!==null?(W&ye.Open)===ye.Open:S===g.Open);It(B,V,h.actions.closeCombobox);let K=p.__demoMode?!1:d&&S===g.Open;Tt(K,y);let re=p.__demoMode?!1:d&&S===g.Open;Mt(re,{allowed:f.useCallback(()=>[V,P,L],[V,P,L])});let Z=D(h,h.selectors.didInputMove)?!1:B;ne(()=>{var F;p.optionsPropsRef.current.static=(F=t.static)!=null?F:!1},[p.optionsPropsRef,t.static]),ne(()=>{p.optionsPropsRef.current.hold=r},[p.optionsPropsRef,r]),Ht(S===g.Open,{container:L,accept(F){return F.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:F.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(F){F.setAttribute("role","none")}});let oe=Ee([P?.id]),J=he({open:S===g.Open,option:void 0}),le=k(()=>{h.actions.setActivationTrigger(X.Pointer)}),m=k(F=>{F.preventDefault(),h.actions.setActivationTrigger(X.Pointer)}),G=Ce(b?O():{},{"aria-labelledby":oe,role:"listbox","aria-multiselectable":p.mode===q.Multi?!0:void 0,id:a,ref:z,style:{...l.style,...M,"--input-width":$e(B,V,!0).width,"--button-width":$e(B,P,!0).width},onWheel:H===X.Pointer?void 0:le,onMouseDown:m,...$t(E)}),T=B&&S===g.Closed&&!t.static,_=ke(T,(e=p.virtual)==null?void 0:e.options),I=ke(T,p.value),N=f.useCallback(F=>p.compare(I,F),[p.compare,I]),C=f.useMemo(()=>{if(!p.virtual)return p;if(_===void 0)throw new Error("Missing `options` in virtual mode");return _!==p.virtual.options?{...p,virtual:{...p.virtual,options:_}}:p},[p,_,(o=p.virtual)==null?void 0:o.options]);p.virtual&&Object.assign(l,{children:j.createElement(de.Provider,{value:C},j.createElement(mn,{slot:J},l.children))});let Q=fe(),nt=f.useMemo(()=>p.mode===q.Multi?p:{...p,isSelected:N},[p,N]);return j.createElement(Rt,{enabled:c?t.static||B:!1,ownerDocument:Y},j.createElement(de.Provider,{value:nt},Q({ourProps:G,theirProps:{...l,children:j.createElement(Vt,{freeze:T},typeof l.children=="function"?(n=l.children)==null?void 0:n.call(l,J):l.children)},slot:J,defaultTag:On,features:En,visible:Z,name:"Combobox.Options"})))}let wn="div";function In(t,s){var e,o,n;let i=ae("Combobox.Option"),a=me("Combobox.Option"),r=f.useId(),{id:u=`headlessui-combobox-option-${r}`,value:c,disabled:d=(n=(o=(e=i.virtual)==null?void 0:e.disabled)==null?void 0:o.call(e,c))!=null?n:!1,order:v=null,...l}=t,[h]=D(a,E=>[E.inputElement]),p=Ge(h),b=D(a,f.useCallback(E=>a.selectors.isActive(E,c,u),[c,u])),x=i.isSelected(c),M=f.useRef(null),$=Ne({disabled:d,value:c,domRef:M,order:v}),R=f.useContext(Ye),O=Se(s,M,R?R.measureElement:null),z=k(()=>{a.actions.setIsTyping(!1),a.actions.onChange(c)});ne(()=>a.actions.registerOption(u,$),[$,u]);let S=D(a,f.useCallback(E=>a.selectors.shouldScrollIntoView(E,c,u),[c,u]));ne(()=>{if(S)return _t().requestAnimationFrame(()=>{var E,K;(K=(E=M.current)==null?void 0:E.scrollIntoView)==null||K.call(E,{block:"nearest"})})},[S,M]);let V=k(E=>{E.preventDefault(),E.button===Lt.Left&&(d||(z(),Nt()||requestAnimationFrame(()=>p()),i.mode===q.Single&&a.actions.closeCombobox()))}),P=k(()=>{if(d)return a.actions.goToOption({focus:A.Nothing});let E=i.calculateIndex(c);a.actions.goToOption({focus:A.Specific,idx:E})}),L=kt(),H=k(E=>L.update(E)),Y=k(E=>{if(!L.wasMoved(E)||d||b&&a.state.activationTrigger===X.Pointer)return;let K=i.calculateIndex(c);a.actions.goToOption({focus:A.Specific,idx:K},X.Pointer)}),y=k(E=>{L.wasMoved(E)&&(d||b&&(i.optionsPropsRef.current.hold||a.state.activationTrigger===X.Pointer&&a.actions.goToOption({focus:A.Nothing})))}),W=he({active:b,focus:b,selected:x,disabled:d}),B={id:u,ref:O,role:"option",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,"aria-selected":x,disabled:void 0,onMouseDown:V,onFocus:P,onPointerEnter:H,onMouseEnter:H,onPointerMove:Y,onMouseMove:Y,onPointerLeave:y,onMouseLeave:y};return fe()({ourProps:B,theirProps:l,slot:W,defaultTag:wn,name:"Combobox.Option"})}let Tn=pe(vn),Xe=pe(Sn),Ze=pe(xn),Mn=dt,Je=pe(Cn),Qe=pe(In),$n=Object.assign(Tn,{Input:Ze,Button:Xe,Label:Mn,Options:Je,Option:Qe});function et({label:t,options:s,value:e,defaultValue:o,onChange:n,placeholder:i="Search...",error:a,className:r=""}){const[u,c]=f.useState(""),d=e??o,v=u===""?s:s.filter(l=>l.label.toLowerCase().includes(u.toLowerCase())||l.description?.toLowerCase().includes(u.toLowerCase()));return w.jsxs("div",{className:`flex flex-col gap-1.5 ${r}`,children:[t&&w.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-text-secondary dark:text-text-secondary-dark ml-2",children:t}),w.jsx($n,{value:d,onChange:l=>{n(l),c("")},children:w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:`
            relative w-full flex items-center overflow-hidden rounded-2xl border transition-all duration-200
            bg-surface-panel dark:bg-surface-panel-dark
            ${a?"border-state-danger dark:border-state-danger-dark":"border-border dark:border-border-dark focus-within:ring-4 focus-within:ring-primary/10 dark:focus-within:ring-primary-dark/90 focus-within:border-primary dark:focus-within:border-primary-dark"}
          `,children:[w.jsx(Xt,{className:"ml-4 h-4 w-4 text-text-secondary/50 dark:text-text-secondary-dark/50"}),w.jsx(Ze,{className:"w-full border-none bg-transparent py-3 pl-2 pr-10 text-sm text-text-primary dark:text-text-primary-dark focus:ring-0 outline-none",displayValue:l=>s.find(h=>h.value===l)?.label||"",onChange:l=>c(l.target.value),placeholder:i}),w.jsx(Xe,{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:w.jsx(qt,{className:"h-5 w-5 text-text-secondary dark:text-text-secondary-dark","aria-hidden":"true"})})]}),w.jsx(jt,{as:f.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",afterLeave:()=>c(""),children:w.jsx(Je,{anchor:"bottom start",className:"z-9999 mt-2 max-h-60 w-(--input-width) overflow-auto rounded-2xl border border-border dark:border-border-dark bg-surface-panel/95 dark:bg-surface-panel-dark/5 p-1 shadow-2xl backdrop-blur-xl [--anchor-gap:4px]",children:v.length===0&&u!==""?w.jsxs("div",{className:"relative cursor-default select-none py-4 px-4 text-center text-sm text-text-secondary dark:text-text-secondary-dark",children:['No results found for "',u,'"']}):v.map(l=>w.jsx(Qe,{value:l.value,className:"group relative cursor-pointer select-none rounded-xl py-2.5 pl-10 pr-4 text-sm transition-colors data-focus:bg-primary/10 dark:data-focus:bg-primary-dark/90",children:({selected:h})=>w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:`block truncate ${h?"font-bold text-primary dark:text-primary-dark":"text-text-primary dark:text-text-primary-dark"}`,children:l.label}),l.description&&w.jsx("span",{className:"text-[10px] text-text-secondary dark:text-text-secondary-dark opacity-70",children:l.description})]}),h&&w.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-primary dark:text-primary-dark",children:w.jsx(Kt,{className:"h-5 w-5","aria-hidden":"true"})})]})},l.value))})})]})}),a&&w.jsx("p",{className:"ml-2 text-xs text-state-danger dark:text-state-danger-sark font-medium",children:a})]})}et.__docgenInfo={description:"",methods:[],displayName:"SearchableCombobox",props:{placeholder:{defaultValue:{value:"'Search...'",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1}}};const Ln={title:"Forms/SearchableCombobox",component:et,tags:["autodocs"],argTypes:{onChange:{action:"changed"}},decorators:[t=>w.jsx("div",{className:"p-10 max-w-md mx-auto min-h-100 bg-surface-base dark:bg-surface-base-dark rounded-3xl",children:w.jsx(t,{})})]},tt=[{value:"food",label:"Food & Drinks",description:"Restaurants, Groceries, Bars"},{value:"housing",label:"Housing",description:"Rent, Mortgage, Utilities"},{value:"transport",label:"Transport",description:"Fuel, Uber, Train tickets"},{value:"shopping",label:"Shopping",description:"Clothes, Electronics, Home"},{value:"health",label:"Health",description:"Pharmacy, Gym, Doctor"}],ge={args:{label:"Category",options:tt,placeholder:"Search categories..."}},ve={args:{label:"Edit Category",options:tt,defaultValue:"transport"}},be={args:{label:"Savings Goal",options:[{value:"car",label:"New Car",description:"Target: 15,000€"},{value:"vacation",label:"Summer Trip",description:"Target: 2,000€"}],error:"Please select a valid savings goal to continue."}},xe={args:{label:"Select Merchant",placeholder:"Type to filter 100+ merchants...",options:Array.from({length:100}).map((t,s)=>({value:s,label:`Merchant ${s+1}`,description:`Description for merchant number ${s+1}`}))}};ge.parameters={...ge.parameters,docs:{...ge.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Category',
    options: CATEGORY_OPTIONS,
    placeholder: 'Search categories...'
  }
}`,...ge.parameters?.docs?.source}}};ve.parameters={...ve.parameters,docs:{...ve.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Edit Category',
    options: CATEGORY_OPTIONS,
    defaultValue: 'transport'
  }
}`,...ve.parameters?.docs?.source}}};be.parameters={...be.parameters,docs:{...be.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Savings Goal',
    options: [{
      value: 'car',
      label: 'New Car',
      description: 'Target: 15,000€'
    }, {
      value: 'vacation',
      label: 'Summer Trip',
      description: 'Target: 2,000€'
    }],
    error: 'Please select a valid savings goal to continue.'
  }
}`,...be.parameters?.docs?.source}}};xe.parameters={...xe.parameters,docs:{...xe.parameters?.docs,source:{originalSource:`{
  args: {
    label: 'Select Merchant',
    placeholder: 'Type to filter 100+ merchants...',
    options: Array.from({
      length: 100
    }).map((_, i) => ({
      value: i,
      label: \`Merchant \${i + 1}\`,
      description: \`Description for merchant number \${i + 1}\`
    }))
  }
}`,...xe.parameters?.docs?.source}}};const Nn=["Default","Preselected","WithError","LargeDataset"];export{ge as Default,xe as LargeDataset,ve as Preselected,be as WithError,Nn as __namedExportsOrder,Ln as default};
