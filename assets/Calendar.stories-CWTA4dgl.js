import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as $}from"./iframe-foW8KUVn.js";import"./preload-helper-PPVm8Dsz.js";function E(e){return e<10?`0${e}`:`${e}`}function C(e){return`${e.getFullYear()}-${E(e.getMonth()+1)}-${E(e.getDate())}`}function T(e,s){const u=new Date(e,s,1),a=new Date(e,s+1,0),r=[],d=new Date(u);d.setDate(u.getDate()-d.getDay());const i=new Date(a);i.setDate(a.getDate()+(6-i.getDay()));for(let o=new Date(d);o<=i;o.setDate(o.getDate()+1))r.push(new Date(o));const l=[];for(let o=0;o<r.length;o+=7)l.push(r.slice(o,o+7));return l}function R(e){if(typeof e!="object"||e===null)return null;const s=e;return Array.isArray(s.items)?s.items:Array.isArray(s.events)?s.events:null}function j(e){if(e!=null){if(typeof e=="string"||typeof e=="number")return String(e);if(typeof e=="object"){const s=e;if(typeof s.title=="string")return s.title;if(typeof s.name=="string")return s.name}}}function _(e){const s=[];if(!Array.isArray(e)||e.length===0)return s;function u(a,r,d){for(const[i,l]of r.entries()){const o=a?.id?`${a.id}-${i}`:`evt-${d}-${i}`;s.push({id:a?.id,title:j(l)??`item-${i}`,key:o})}}for(const[a,r]of e.entries()){if(r==null)continue;const d=R(r);if(d?.length){u(r??void 0,d,a);continue}if(typeof r=="object"){const l=r,o=l.id??`evt-${a}`,v=l.title??l.name??j(l)??o;s.push({id:o,title:v,key:o});continue}const i=`evt-${a}`;s.push({id:i,title:j(r)??i,key:i})}return s}const I=({dayEvents:e,onEventClick:s})=>{const u=_(e??[]);return u.length===0?null:t.jsx("div",{className:"space-y-1",children:u.map(a=>t.jsx("button",{type:"button",onClick:()=>a.id&&s?.(a.id),title:a.title,"aria-label":a.title,className:"w-full text-left text-xs py-1 px-2 rounded cursor-pointer bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-400",children:t.jsx("div",{className:"truncate",children:a.title})},a.key))})},A=({d:e,isCurrentMonth:s,dayEvents:u,actionLabel:a,onAction:r,onEventClick:d,containerClass:i})=>{const l=C(e),o=i??"min-h-[6rem]";return t.jsxs("div",{className:`${o} border rounded-lg p-3 ${s?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"} border-gray-200 dark:border-gray-700`,children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsx("div",{className:`text-sm font-medium ${s?"text-gray-800 dark:text-gray-100":"text-gray-400 dark:text-gray-500"}`,children:e.getDate()}),t.jsx("button",{type:"button",onClick:()=>r?.(e),className:"text-xs px-2 py-1 rounded cursor-pointer bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-200 hover:bg-indigo-100",children:a})]}),t.jsx("div",{className:"mt-2 space-y-1",children:t.jsx(I,{dayEvents:u,onEventClick:d})})]},l)};function D({year:e,month:s,title:u,onPrev:a,onNext:r,onAction:d,onEventClick:i,eventsByDate:l={},actionLabel:o="Plan",initialView:v}){const[c,y]=$.useState(new Date(e,s,1)),[p,N]=$.useState(v??"month"),W=T(c.getFullYear(),c.getMonth()),b=new Date(c);b.setDate(c.getDate()-c.getDay());const M=[];for(let n=0;n<7;n++){const m=new Date(b);m.setDate(b.getDate()+n),M.push(m)}const B=()=>{if(p==="month"){const n=new Date(c.getFullYear(),c.getMonth()-1,1);y(n)}else{const n=new Date(c);n.setDate(n.getDate()-7),y(n)}a?.()},L=()=>{if(p==="month"){const n=new Date(c.getFullYear(),c.getMonth()+1,1);y(n)}else{const n=new Date(c);n.setDate(n.getDate()+7),y(n)}r?.()};return t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{children:t.jsx("h2",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300",children:u??`${c.toLocaleString(void 0,{month:"long",year:"numeric"})}`})}),t.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[t.jsx("button",{onClick:()=>N("month"),className:`px-2 py-1 rounded ${p==="month"?"bg-blue-100 text-blue-700":"bg-transparent text-gray-600"}`,children:"Month"}),t.jsx("button",{onClick:()=>N("week"),className:`px-2 py-1 rounded ${p==="week"?"bg-blue-100 text-blue-700":"bg-transparent text-gray-600"}`,children:"Week"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:B,className:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-800",children:"Prev"}),t.jsx("button",{onClick:L,className:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-800",children:"Next"})]})]}),t.jsx("div",{className:"hidden sm:grid sm:grid-cols-7 gap-2 text-left",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(n=>t.jsx("div",{className:"font-semibold py-2 text-sm text-gray-600 dark:text-gray-300",children:n},n))}),p==="month"?t.jsx("div",{className:"grid sm:grid-cols-7 grid-cols-2 gap-3 mt-3",children:W.flat().map(n=>{const m=C(n),k=n.getMonth()===c.getMonth(),w=l[m]??[];return t.jsx(A,{d:n,isCurrentMonth:k,dayEvents:w,actionLabel:o,onAction:d,onEventClick:i,containerClass:"min-h-[6rem]"},m)})}):t.jsx("div",{className:"grid sm:grid-cols-7 grid-cols-1 gap-3 mt-3",children:M.map(n=>{const m=C(n),k=n.getMonth()===c.getMonth(),w=l[m]??[];return t.jsx(A,{d:n,isCurrentMonth:k,dayEvents:w,actionLabel:o,onAction:d,onEventClick:i,containerClass:"min-h-[8rem]"},m)})})]})}D.__docgenInfo={description:"",methods:[],displayName:"Calendar",props:{eventsByDate:{defaultValue:{value:"{}",computed:!1},required:!1},actionLabel:{defaultValue:{value:"'Plan'",computed:!1},required:!1}}};const G={title:"Data Display/Calendar",component:D,parameters:{layout:"centered"}},g=new Date,h=e=>e.toISOString().slice(0,10),S=new Date(g);S.setDate(g.getDate()+1);const P=new Date(g);P.setDate(g.getDate()+3);const F=new Date(g);F.setDate(g.getDate()-2);const V=new Date(g);V.setDate(g.getDate()+7);const Y={[h(g)]:[{id:"evt-today-1",title:"Team Meeting"},{id:"evt-today-2",title:"1:1",items:[{title:"Discuss roadmap"}]}],[h(S)]:[{id:"evt-tomorrow-1",title:"Deploy"}],[h(P)]:[{id:"evt-deadline",title:"Project Deadline"},{id:"evt-workshop",title:"Workshop",items:[{title:"Prep"},{title:"Run"}]}],[h(F)]:[{id:"evt-past",title:"Client Call"}],[h(V)]:[{id:"evt-events-1",events:[{name:"Recipe A"},{name:"Recipe B"}]}]},f={render:()=>t.jsx(D,{year:g.getFullYear(),month:g.getMonth(),eventsByDate:Y,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})},x={render:()=>t.jsx(D,{year:g.getFullYear(),month:g.getMonth(),initialView:"week",eventsByDate:Y,onAction:e=>console.log("onAction",e),onEventClick:e=>console.log("onEventClick",e),actionLabel:"Plan"})};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...f.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  render: () => <Calendar year={today.getFullYear()} month={today.getMonth()} initialView="week" eventsByDate={sampleEvents} onAction={d => console.log('onAction', d)} onEventClick={id => console.log('onEventClick', id)} actionLabel="Plan" />
}`,...x.parameters?.docs?.source}}};const H=["MonthView","WeekView"];export{f as MonthView,x as WeekView,H as __namedExportsOrder,G as default};
